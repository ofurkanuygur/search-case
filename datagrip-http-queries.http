### ============================================
### DataGrip'te Elasticsearch SQL Sorguları
### HTTP Request Scratch File
### ============================================

### 1. Tabloları Listele
POST http://localhost:9200/_sql?format=txt
Content-Type: application/json

{
  "query": "SHOW TABLES"
}

###

### 2. Content-Index Tablosunu İncele
POST http://localhost:9200/_sql?format=txt
Content-Type: application/json

{
  "query": "DESCRIBE \"content-index\""
}

###

### 3. İlk 10 Kayıt - Tablo Formatında
POST http://localhost:9200/_sql?format=txt
Content-Type: application/json

{
  "query": "SELECT id, title, score FROM \"content-index\" LIMIT 10"
}

###

### 4. JSON Formatında Veri Çek
POST http://localhost:9200/_sql?format=json
Content-Type: application/json

{
  "query": "SELECT * FROM \"content-index\" LIMIT 5"
}

###

### 5. CSV Formatında Export
POST http://localhost:9200/_sql?format=csv
Content-Type: application/json

{
  "query": "SELECT id, title, score, \"publishedAt\" FROM \"content-index\" ORDER BY score DESC LIMIT 20"
}

###

### 6. Koşullu Sorgulama
POST http://localhost:9200/_sql?format=txt
Content-Type: application/json

{
  "query": "SELECT title, score FROM \"content-index\" WHERE score > 8.0 ORDER BY score DESC"
}

###

### 7. Aggregate Fonksiyonlar
POST http://localhost:9200/_sql?format=txt
Content-Type: application/json

{
  "query": "SELECT COUNT(*) as total_docs, AVG(score) as avg_score, MAX(score) as max_score, MIN(score) as min_score FROM \"content-index\""
}

###

### 8. Group By - ContentType'a Göre
POST http://localhost:9200/_sql?format=txt
Content-Type: application/json

{
  "query": "SELECT contentType, COUNT(*) as count, AVG(score) as avg_score FROM \"content-index\" GROUP BY contentType"
}

###

### 9. LIKE Operatörü ile Arama
POST http://localhost:9200/_sql?format=txt
Content-Type: application/json

{
  "query": "SELECT title, score FROM \"content-index\" WHERE title LIKE '%test%'"
}

###

### 10. Tarih Filtresi
POST http://localhost:9200/_sql?format=txt
Content-Type: application/json

{
  "query": "SELECT title, \"publishedAt\" FROM \"content-index\" WHERE \"publishedAt\" > '2024-01-01' ORDER BY \"publishedAt\" DESC"
}

###

### ============================================
### Elasticsearch Native REST API Sorguları
### ============================================

### 11. Tüm Dokümanlar (Native Search)
GET http://localhost:9200/content-index/_search
Content-Type: application/json

{
  "query": {
    "match_all": {}
  },
  "size": 10,
  "_source": ["id", "title", "score", "contentType"]
}

###

### 12. Full Text Search
GET http://localhost:9200/content-index/_search
Content-Type: application/json

{
  "query": {
    "match": {
      "title": {
        "query": "breaking news",
        "operator": "or"
      }
    }
  },
  "highlight": {
    "fields": {
      "title": {}
    }
  }
}

###

### 13. Range Query (Score Filtresi)
GET http://localhost:9200/content-index/_search
Content-Type: application/json

{
  "query": {
    "range": {
      "score": {
        "gte": 7.5,
        "lte": 10
      }
    }
  },
  "sort": [
    { "score": "desc" }
  ]
}

###

### 14. Aggregations (İstatistikler)
GET http://localhost:9200/content-index/_search
Content-Type: application/json

{
  "size": 0,
  "aggs": {
    "content_types": {
      "terms": {
        "field": "contentType.keyword"
      }
    },
    "score_stats": {
      "stats": {
        "field": "score"
      }
    },
    "score_histogram": {
      "histogram": {
        "field": "score",
        "interval": 1
      }
    }
  }
}

###

### 15. Index İstatistikleri
GET http://localhost:9200/content-index/_stats

###

### 16. Mapping Bilgisi
GET http://localhost:9200/content-index/_mapping

###

### 17. Cluster Sağlık Durumu
GET http://localhost:9200/_cluster/health?pretty

###

### 18. Node Bilgileri
GET http://localhost:9200/_nodes/stats?pretty

###

### ============================================
### Test ve Doğrulama Sorguları
### ============================================

### 19. SQL Desteğini Kontrol Et
GET http://localhost:9200/_xpack?filter_path=features.sql

###

### 20. Lisans Bilgisi
GET http://localhost:9200/_license
